{"version":3,"sources":["Bille.js","Clou.js","Histogram.js","Gaussian.js","Planche.js","App.js","index.js"],"names":["Bille","position","Object","classCallCheck","this","speed","x","y","basePosition","assign","Clou","outNode","arguments","length","undefined","id","Date","valueOf","Math","round","random","counter","balls","_this","forEach","ball","i","object","lastCollision","pos1","pos2","vector","sqrt","pow","distanceBetween","React","Component","makeGaussian","mean","standardDeviation","maxHeight","defaultTo","E","value","defaultValue","isNaN","style","PIXI","fontFamily","fontSize","fontStyle","fontWeight","fill","stroke","strokeThickness","dropShadow","dropShadowColor","dropShadowBlur","dropShadowAngle","PI","dropShadowDistance","wordWrap","wordWrapWidth","normalStyle","Planche","props","possibleConstructorReturn","getPrototypeOf","call","state","shouldUpdate","tickId","billes","clous","push","window","innerWidth","nClous","innerHeight","basePos","j","_this2","setInterval","tick","setState","clearInterval","nextProps","nextState","should","_this3","bille","clou","checkCollisions","_this4","eligibleClous","filter","c","nBillesArrivees","clousAnnotations","map","react_default","a","createElement","react_pixi_module","text","width","height","options","antialias","draw","g","clear","lineStyle","beginFill","drawCircle","drawRect","endFill","App","className","src_Planche","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.6d59de83.chunk.js","sourcesContent":["class Bille {\n    constructor(position) {\n        this.speed        = {x: 0,   y: 3}\n        this.position     = {x: position.x, y: position.y}\n        this.basePosition = Object.assign({}, position)\n    }\n    tick() {\n        this.position.x += this.speed.x\n        this.position.y += this.speed.y\n    }\n};\n\nexport default Bille\n","function distanceBetween(pos1, pos2) {\n    let vector = {\n        x: pos2.x - pos1.x,\n        y: pos2.y - pos1.y\n    }\n    return Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2))\n}\n\n\nclass Clou {\n    constructor(position, outNode=false) {\n        this.position = {x: position.x, y: position.y}\n        this.id = new Date().valueOf() + Math.round((Math.random()*1000))\n        this.outNode = outNode\n        this.counter = 0\n    }\n\n\n    checkCollisions(balls)  {\n        balls.forEach((ball, i, object) => {\n            if( ball.lastCollision != this.id\n            &&  distanceBetween(this.position, ball.position) < 10 ) {\n                ball.speed.x = Math.round(Math.random()) ? -1 : 1\n                ball.lastCollision = this.id\n                this.counter++\n                if(this.outNode) {\n                    ball.speed    = {x: 0, y: 0} // Ici, on ne relance pas la balle,  \n                                                 // sinon il suffirait juste à lui assigner une vitesse sur y \n                    ball.position = Object.assign({}, ball.basePosition)\n                }\n            }\n        })\n    }\n};\n\n\n\nexport default Clou\n","import  React  from 'react'\nimport { Stage, Graphics, Text } from '@inlet/react-pixi'\n\nclass Histogram extends React.Component {\n    constructor(props) {\n        super(props)\n    }\n    render() {\n        return (\n            <Stage width={window.innerWidth} height={window.innerHeight * 9/10} options={{ antialias: true }}>\n                <Text x={0} y={0} text={\"nBilles : \" + this.props.nBillesArrivees} style={this.props.normalStyle}/>\n                <Graphics\n                    draw={g => {\n                        g.clear()\n                        g.lineStyle(0)\n                        g.beginFill(0xffff0b, 1)\n                        this.props.clous.filter(clou => clou.outNode).forEach(clou => {\n                            g.beginFill(clou.outNode ? 0xFF00FF : 0xAAAAAA , 1)\n                            g.drawRect(clou.position.x, clou.position.y-5/2 - clou.counter * 10, 5, clou.counter * 10)\n                        })\n                        g.endFill()\n                    }}\n                />\n            </Stage>\n        )\n    }\n}\nexport default Histogram","\n\n// https://github.com/ollyoechsle/DynaJS/blob/master/web/javascript/lang/math.gaussian.js\n\nfunction makeGaussian(mean, standardDeviation, maxHeight) {\n\n    mean = defaultTo(mean, 0.0);\n    standardDeviation = defaultTo(standardDeviation, 1.0);\n    maxHeight = defaultTo(maxHeight, 1.0);\n\n    return function getNormal(x) {\n        return maxHeight * Math.pow(Math.E, -Math.pow(x - mean, 2) / (2 * (standardDeviation * standardDeviation)));\n    }\n\n    function defaultTo(value, defaultValue) {\n        return isNaN(value) ? defaultValue : value;\n    }\n\n}\n\nexport default makeGaussian\n","import React from 'react'\nimport { Stage, Graphics, Text } from '@inlet/react-pixi'\nimport Bille from './Bille'\nimport Clou from './Clou'\nimport Histogram from './Histogram'\nimport * as PIXI from 'pixi.js';\nimport makeGaussian from './Gaussian'\n\nconst style = new PIXI.TextStyle({\n  fontFamily: 'Arial',\n  fontSize: 20,\n  fontStyle: 'italic',\n  fontWeight: 'bold',\n  fill: ['#ffffff', '#00ff99'], // gradient\n  stroke: '#4a1850',\n  strokeThickness: 5,\n  dropShadow: true,\n  dropShadowColor: '#000000',\n  dropShadowBlur: 4,\n  dropShadowAngle: Math.PI / 6,\n  dropShadowDistance: 6,\n  wordWrap: true,\n  wordWrapWidth: 440\n})\n\n\nconst normalStyle = new PIXI.TextStyle({\n    fontFamily: 'Arial',\n    fontSize: 20,\n    fontStyle: 'italic',\n    fontWeight: 'bold',\n    fill: ['#ffffff', ],\n      })\n  \n\nclass Planche extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            shouldUpdate: true,\n            tickId: null,\n            billes: [],\n            clous: [],\n        }\n\n        let nBilles = 100\n        for(let i = 0 ; i < nBilles ; i++) {\n            this.state.billes.push(new Bille({x: window.innerWidth / 2, y: - i * 100}))\n        }\n\n        let nClous = Math.round(window.innerHeight * (7/8) / 75)\n        let basePos = {x: window.innerWidth / 2 + 25, y: 0}\n        for(let i = 0 ; i < nClous ; i++) {\n            for(let j = 0 ; j < i ; j++) {\n                let x = basePos.x - i * 50 / 2 + j * 50\n                this.state.clous.push(new Clou({x, y: basePos.y + i * 75}, i == nClous - 1))\n            }\n        }\n    }\n\n    componentDidMount () {\n        var tickId = setInterval(() => this.tick(), 10);\n        this.setState({tickId});\n    }\n\n    componentWillUnmount () {\n        clearInterval(this.state.tickId);\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        let should = this.state.shouldUpdate\n        if (should) {\n            this.setState({\n                shouldUpdate: !this.state.shouldUpdate\n            })\n        }\n        return should\n    }\n\n\n    tick() {\n        this.state.billes.forEach(bille => {\n            bille.tick()\n        })\n        this.state.clous.forEach(clou => {\n            clou.checkCollisions(this.state.billes)\n        })\n        this.setState({\n            shouldUpdate: true\n        })\n    }\n\n    render() {        \n        let eligibleClous = this.state.clous.filter(c => c.outNode)\n\n        let nBillesArrivees = 0\n        eligibleClous.forEach(clou => {\n            nBillesArrivees += clou.counter\n        })\n\n        let clousAnnotations = eligibleClous.map(clou => {\n            return (\n                <Text x={clou.position.x - 11} y={clou.position.y + 10} text={clou.counter} style={style}/>\n            )\n        })\n        return(\n            <Stage width={window.innerWidth} height={window.innerHeight * 9/10} options={{ antialias: true }}>\n                <Text x={0} y={0} text={\"nBilles : \" + nBillesArrivees} style={normalStyle}/>\n                <Graphics\n                    draw={g => {\n                        g.clear()\n                        if(nBillesArrivees < 100) {\n                            g.lineStyle(0)\n                            g.beginFill(0xffff0b, 1)\n                            this.state.billes.forEach(bille => {\n                                g.drawCircle(bille.position.x, bille.position.y, 5)\n                            })\n                        \n                            this.state.clous.forEach(clou => {\n                                g.beginFill(clou.outNode ? 0xFF00FF : 0xAAAAAA , 1)\n                                g.drawCircle(clou.position.x, clou.position.y, 5)\n                            })\n                        }\n                        let gaussian = makeGaussian(0,1,100);\n                        this.state.clous.filter(clou => clou.outNode).forEach(clou => {\n                            g.beginFill(clou.outNode ? 0xFF00FF : 0xAAAAAA , 1)\n                            g.drawRect(clou.position.x-5/2, clou.position.y - clou.counter * 10, 5, clou.counter * 10)\n                            g.beginFill( 0xAAAAAA , 1)\n                        })    \n                        g.endFill()\n                    }}\n                />\n                {clousAnnotations}\n            </Stage>\n        )\n    }\n}\n\nexport default Planche;\n","import React, { Component } from 'react';\nimport Planche from './Planche'\n\nclass App extends Component {\n  render() {\n    return (\n        <div className=\"App\">\n            <Planche />\n            <header className=\"App-header\">\n                <p>\n                    Alex Toussaint,  2019\n                </p>\n            </header>\n        </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}